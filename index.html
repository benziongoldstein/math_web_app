<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prime Factorization Game</title>
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <!-- Main Menu Screen -->
    <div id="main-menu" class="screen active">
        <!-- User Profile Display (shown when signed in) -->
        <div id="user-profile" class="user-profile" style="display: none;">
            <img id="user-photo" class="user-photo" src="" alt="User">
            <span id="user-name" class="user-name">Guest</span>
            <button id="sign-out-btn" class="btn btn-small">Sign Out</button>
        </div>
        
        <h1>Prime Factorization Game</h1>
        <p class="subtitle">Practice your math skills!</p>
        
        <!-- Mode Selector -->
        <div class="mode-selector">
            <p class="mode-label">Choose Game Mode:</p>
            <div class="mode-buttons">
                <button id="normal-mode-btn" class="btn mode-btn mode-btn-active" data-mode="normal">
                    <span class="mode-name">Normal Mode</span>
                    <span class="mode-desc">See multiplication</span>
                </button>
                <button id="simple-mode-btn" class="btn mode-btn" data-mode="simple">
                    <span class="mode-name">Simple Mode</span>
                    <span class="mode-desc">See division steps</span>
                </button>
            </div>
        </div>
        
        <button id="start-btn" class="btn btn-primary">Start Game</button>
        <button id="how-to-play-btn" class="btn btn-secondary">How to Play</button>
        <button id="leaderboard-btn" class="btn btn-secondary">üèÜ Leaderboard</button>
        
        <!-- Sign in button (shown when NOT signed in) -->
        <button id="sign-in-btn" class="btn btn-google">
            <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTgiIGhlaWdodD0iMTgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj48cGF0aCBkPSJNMTcuNiA5LjJsLS4xLTEuOEg5djMuNGg0LjhDMTMuNiAxMiAxMyAxMyAxMiAxMy42djIuMmgzYTguOCA4LjggMCAwIDAgMi42LTYuNnoiIGZpbGw9IiM0Mjg1RjQiIGZpbGwtcnVsZT0ibm9uemVybyIvPjxwYXRoIGQ9Ik05IDE4YzIuNCAwIDQuNS0uOCA2LTIuMmwtMy0yLjJhNS40IDUuNCAwIDAgMS04LTIuOUgxVjEzYTkgOSAwIDAgMCA4IDV6IiBmaWxsPSIjMzRBODUzIiBmaWxsLXJ1bGU9Im5vbnplcm8iLz48cGF0aCBkPSJNNCAxMC43YTUuNCA1LjQgMCAwIDEgMC0zLjRWNUgxYTkgOSAwIDAgMCAwIDhsMy0yLjN6IiBmaWxsPSIjRkJCQzA1IiBmaWxsLXJ1bGU9Im5vbnplcm8iLz48cGF0aCBkPSJNOSAzLjZjMS4zIDAgMi41LjQgMy40IDEuM0wxNSAyLjNBOSA5IDAgMCAwIDEgNWwzIDIuNGE1LjQgNS40IDAgMCAxIDUtMy43eiIgZmlsbD0iI0VBNDMzNSIgZmlsbC1ydWxlPSJub256ZXJvIi8+PHBhdGggZD0iTTAgMGgxOHYxOEgweiIvPjwvZz48L3N2Zz4=" alt="Google" class="google-icon">
            Sign in with Google
        </button>
    </div>

    <!-- How to Play Screen -->
    <div id="how-to-play" class="screen">
        <h2>How to Play</h2>
        <div class="instructions">
            <p><strong>Goal:</strong> Match the target number by multiplying prime numbers!</p>
            <p><strong>Time Limit:</strong> You have 1 minute to factorize as many numbers as possible.</p>
            <p><strong>How to Play:</strong></p>
            <ul>
                <li>Click prime numbers at the bottom to multiply them together</li>
                <li>You can click the same prime multiple times (e.g., 2 √ó 2 √ó 2 = 8)</li>
                <li>When your product matches the target, you get a new number instantly!</li>
                <li>To undo, click a prime in your equation display</li>
            </ul>
            <p><strong>Scoring:</strong></p>
            <ul>
                <li>Correct Factors: How many numbers you solved correctly</li>
                <li>Undo Count: How many times you used undo</li>
            </ul>
        </div>
        <button id="back-to-menu-btn" class="btn btn-secondary">Back to Menu</button>
    </div>

    <!-- Countdown Screen -->
    <div id="countdown" class="screen">
        <div id="countdown-number" class="countdown-display">3</div>
    </div>

    <!-- Game Screen -->
    <div id="game-screen" class="screen">
        <!-- Target Number Display -->
        <div class="target-section">
            <div class="target-container">
                <div class="target-item">
                    <p class="target-label">Target:</p>
                    <div id="target-number" class="target-display">0</div>
                </div>
                <div id="intermediate-item" class="target-item" style="display: none;">
                    <p class="target-label">Intermediate:</p>
                    <div id="intermediate-number" class="target-display">0</div>
                </div>
            </div>
        </div>

        <!-- Timer -->
        <div class="timer-section">
            <p class="timer-label">Time:</p>
            <div id="timer" class="timer-display">60</div>
        </div>

        <!-- Scores -->
        <div class="scores-section">
            <div class="score-item">
                <span class="score-label">Correct:</span>
                <span id="correct-score" class="score-value">0</span>
            </div>
            <div class="score-item">
                <span class="score-label">Undos:</span>
                <span id="undo-score" class="score-value">0</span>
            </div>
        </div>

        <!-- Equation Display -->
        <div class="equation-section">
            <p class="equation-label">Your Equation:</p>
            <div id="equation-display" class="equation-display">
                <span class="equation-placeholder">Click primes below to start</span>
            </div>
        </div>

        <!-- Prime Number Buttons -->
        <div class="primes-section">
            <p class="primes-label">Prime Numbers:</p>
            <div id="prime-buttons" class="prime-buttons">
                <button class="prime-btn" data-prime="2">2</button>
                <button class="prime-btn" data-prime="3">3</button>
                <button class="prime-btn" data-prime="5">5</button>
                <button class="prime-btn" data-prime="7">7</button>
                <button class="prime-btn" data-prime="11">11</button>
                <button class="prime-btn" data-prime="13">13</button>
                <button class="prime-btn" data-prime="17">17</button>
                <button class="prime-btn" data-prime="19">19</button>
                <button class="prime-btn" data-prime="23">23</button>
                <button class="prime-btn" data-prime="29">29</button>
            </div>
        </div>

        <!-- Prime Recognition Button -->
        <div class="prime-recognition-section">
            <p class="prime-recognition-label">Can't factorize?</p>
            <button id="prime-recognition-btn" class="btn-prime-recognition">It's Prime!</button>
        </div>
    </div>

    <!-- Game Over Screen -->
    <div id="game-over" class="screen">
        <h2>Time's Up!</h2>
        <div class="final-scores">
            <div class="final-score-item">
                <span class="final-score-label">Correct Factors:</span>
                <span id="final-correct" class="final-score-value">0</span>
            </div>
            <div class="final-score-item">
                <span class="final-score-label">Undo Count:</span>
                <span id="final-undo" class="final-score-value">0</span>
            </div>
        </div>
        <button id="return-to-menu-btn" class="btn btn-primary">Return to Main Menu</button>
    </div>

    <!-- Leaderboard Screen -->
    <div id="leaderboard-screen" class="screen">
        <h2>üèÜ Leaderboard</h2>
        
        <!-- Mode Tabs -->
        <div class="leaderboard-tabs">
            <button id="normal-leaderboard-tab" class="tab-btn tab-active" data-mode="normal">Normal Mode</button>
            <button id="simple-leaderboard-tab" class="tab-btn" data-mode="simple">Simple Mode</button>
        </div>
        
        <!-- Your Rank Display -->
        <div id="your-rank-display" class="your-rank" style="display: none;">
            <p>Your Rank: <span id="your-rank-number" class="rank-highlight">#--</span></p>
        </div>
        
        <!-- Loading Message -->
        <div id="leaderboard-loading" class="leaderboard-message">
            <p>Loading scores...</p>
        </div>
        
        <!-- Empty Message -->
        <div id="leaderboard-empty" class="leaderboard-message" style="display: none;">
            <p>No scores yet. Be the first!</p>
        </div>
        
        <!-- Leaderboard Entries -->
        <div id="leaderboard-entries" class="leaderboard-list">
            <!-- Entries will be populated by JavaScript -->
        </div>
        
        <button id="close-leaderboard-btn" class="btn btn-primary">Close</button>
    </div>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    
    <!-- Firebase Configuration -->
    <script src="js/firebase-config.js"></script>
    
    <!-- Firebase Services -->
    <script src="js/auth.js"></script>
    <script src="js/leaderboard.js"></script>
    
    <!-- JavaScript Files -->
    <script src="js/utils.js"></script>
    <script src="js/audio.js"></script>
    <script src="js/game.js"></script>
    <script src="js/ui.js"></script>
    <script src="js/main.js"></script>
</body>
</html>

